# =================================================
# AIRCLOUD LEGAL PLATFORM - LOGROTATE CONFIGURATION
# =================================================
# Author: Łukasz Kołodziej | Aircloud

# Application logs
/var/log/aircloud/app.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 aircloud aircloud
    postrotate
        supervisorctl signal HUP aircloud-legal > /dev/null 2>&1 || true
    endscript
}

# Error logs
/var/log/aircloud/error.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 aircloud aircloud
    postrotate
        supervisorctl signal HUP aircloud-legal > /dev/null 2>&1 || true
    endscript
}

# Access logs
/var/log/aircloud/access.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 aircloud aircloud
    postrotate
        supervisorctl signal HUP aircloud-legal > /dev/null 2>&1 || true
    endscript
}

# Gunicorn logs
/var/log/aircloud/gunicorn.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 aircloud aircloud
    postrotate
        supervisorctl restart aircloud-legal > /dev/null 2>&1 || true
    endscript
}

# Backup logs
/var/log/aircloud/backup.log {
    weekly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 root root
}

# Monitor logs (health check logs rotate more frequently due to volume)
/var/log/aircloud/health-*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
}

# System maintenance logs
/var/log/aircloud/system-*.log {
    weekly
    missingok
    rotate 8
    compress
    delaycompress
    notifempty
    create 644 root root
}

# Database maintenance logs
/var/log/aircloud/db-*.log {
    weekly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 postgres postgres
}

# SSL renewal logs
/var/log/aircloud/ssl-renewal.log {
    monthly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 root root
}

# Performance and monitoring logs
/var/log/aircloud/performance.log
/var/log/aircloud/memory-usage.log
/var/log/aircloud/network.log {
    weekly
    missingok
    rotate 8
    compress
    delaycompress
    notifempty
    create 644 root root
}

# Application specific logs
/var/log/aircloud/reports.log
/var/log/aircloud/archive.log
/var/log/aircloud/session-cleanup.log {
    monthly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 aircloud aircloud
}